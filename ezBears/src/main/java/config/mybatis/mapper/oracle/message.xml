<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="com.ez.ezBears.message.model.MessageDAO">

	<insert id="SendMessage" parameterType="messageSendVO">
		<selectKey keyProperty="messageSendNo" order="BEFORE" resultType="int">
			select messagesend_seq.nextval from dual
		</selectKey>
		insert into messageSend(MESSAGESENDNO, SENDUSERNO, SENDTIME, CONTENT)
		values(#{messageSendNo}, #{sendUserNo}, sysdate, #{content})
	</insert>
	
	<insert id="ReceiveMessage" parameterType="map">
		insert into messageReceive(MESSAGERECEIVENO , RECEIVEUSERNO, MESSAGESENDNO, RECEIVETIME)
		values(messageReceive_seq.nextval, #{messageReceiveVo.receiveUserNo}, #{messageSendNo}, sysdate)
	</insert>
	
	<select id="selectSendBox" parameterType="int" resultType="map">
		 select * from messageView where sendUserNo = #{sendUserNo} order by messageSendNo desc
	</select>
	
	<select id="selectReceiveBox" parameterType="int" resultType="map">
		select * from messageView where receiveUserNo = #{receiverNo} order by messageSendNo desc 
	</select>
	
	
</mapper>